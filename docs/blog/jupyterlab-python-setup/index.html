<!DOCTYPE html>
<html lang="en-us">

  <head>
  <meta charset="utf-8">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <title>Setting up Jupyter_Lab with OpendTect</title>
  <meta name="author" content="Wayne Mogg" />
  
  
  
  
  <meta name="keywords" content="python, jupyter, code, opendtect">
  
  
  <meta name="description" content="">

  <meta name="generator" content="Hugo 0.84.0" />

  
  <link href='//fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,500,700,800' rel='stylesheet' type='text/css'>

  
  <link rel="stylesheet" href="//use.fontawesome.com/releases/v5.11.2/css/all.css">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

  
  <link href="/css/animate.css" rel="stylesheet">

  
  
    <link href="/css/style.green.css" rel="stylesheet" id="theme-stylesheet">
  

  
  <link href="/css/custom.css" rel="stylesheet">

  
  
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
  <link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" href="/img/apple-touch-icon.png" />

  
  <link href="/css/owl.carousel.css" rel="stylesheet">
  <link href="/css/owl.theme.css" rel="stylesheet">

  
  <link rel="alternate" href="https://waynegm.github.io/index.xml" type="application/rss+xml" title="WM Seismic Solutions">

  
  
  
  
  
  
  <meta property="og:updated_time" content="2021-06-05T00:00:00Z">
  
    
    
    <meta property="article:section" content="howto">
    <meta property="article:tag" content="python">
    <meta property="article:tag" content="jupyter">
    <meta property="article:tag" content="code">
    <meta property="article:tag" content="opendtect">
    
    
    <meta property="article:published_time" content="2021-06-05T00:00:00Z">
    <meta property="article:modified_time" content="2021-06-05T00:00:00Z">
  

  
  <meta name="twitter:card" content="summary">
  
  <meta name="twitter:title" content="Setting up Jupyter_Lab with OpendTect">
  
  <meta name="twitter:description" content="">
  

</head>


  <body>

    <div id="all">

        <header class="navbar-affixed-top" data-spy="affix" data-offset-top="62">
    <div class="navbar navbar-default yamm" role="navigation" id="navbar">    
        <div class="container">
            <div class="navbar-header">
                <a class="navbar-brand home" href="/">
                    <img src="/img/logo.png" alt="Setting up Jupyter_Lab with OpendTect logo" class="hidden-xs hidden-sm">
                    <img src="/img/logo_small.png" alt="Setting up Jupyter_Lab with OpendTect logo" class="visible-xs visible-sm">
                    <span class="sr-only">Setting up Jupyter_Lab with OpendTect - go to homepage</span>
                </a>
                <div class="navbar-buttons">
                    <button type="button" class="navbar-toggle btn-template-main" data-toggle="collapse" data-target="#navigation">
                      <span class="sr-only">Toggle Navigation</span>
                        <i class="fas fa-align-justify"></i>
                    </button>
                </div>
            </div>
            

            <div class="navbar-collapse collapse" id="navigation">
                <ul class="nav navbar-nav navbar-right">
                  
                  
                  
                  <li class="dropdown">
                    
                    <a href="/">Home</a>
                    
                  </li>
                  
                  
                  <li class="dropdown">
                    
                    <a href="/services/">Services</a>
                    
                  </li>
                  
                  
                  <li class="dropdown active">
                    
                    <a href="/blog/">Blog</a>
                    
                  </li>
                  
                  
                  <li class="dropdown">
                    
                    <a href="/contact/">Contact</a>
                    
                  </li>
                  
		    
		    <a href="https://github.com/waynegm" target="_blank" ><i class='fab fa-2x fa-github' style='padding: 20px 0;'></i></a>
		    
		    <a href="https://www.linkedin.com/in/waynemogg/" target="_blank" ><i class='fab fa-2x fa-linkedin' ></i></a>
		    
                </ul>
            </div>
            

            <div class="collapse clearfix" id="search">    
                <form class="navbar-form" role="search">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search">
                        <span class="input-group-btn">
                    <button type="submit" class="btn btn-template-main"><i class="fas fa-search"></i></button>
                </span>
                    </div>
                </form>
            </div>
            
        </div>
    </div>
</header>




        <div id="heading-breadcrumbs">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <h1>Setting up Jupyter_Lab with OpendTect</h1>
            </div>
        </div>
    </div>
</div>


        <div id="content">
            <div class="container">

                <div class="row">

                    

                    <div class="col-md-9" id="blog-post">

                        
                          <p class="text-muted text-uppercase mb-small text-right">
                            
                            
                            June 5, 2021
                          </p>
                        

                        <div id="post-content">
                          <h2 id="fixing-the-kerneljson-file-for-opendtect-python">Fixing the kernel.json file for OpendTect Python</h2>
<p>The Jupyter architecture uses &ldquo;kernel.json&rdquo; files to identify a Jupyter kernel. If you have installed OpendTect and installed
and selected one of the OpendTect ML Python environments in the Python Settings dialog, you can use the following command sequences on Linux
and Windows to show a list of available Jupyter kernels. Open a console window (press Ctrl-T with the cursor in the OpendTect window) and enter
the following depending on your system:</p>
<p>For Linux:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>wayne@amdlinux ~<span style="color:#f92672">]</span>$ which python
/opt/seismic/OpendTect_6/Python/envs/odmlpython-cuda10/bin/python
<span style="color:#f92672">[</span>wayne@amdlinux ~<span style="color:#f92672">]</span>$ jupyter kernelspec list
Available kernels:
  python3    /opt/seismic/OpendTect_6/Python/envs/odmlpython-cuda10/share/jupyter/kernels/python3
</code></pre></div><p>For Windows:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-posh" data-lang="posh">(odmlpython-cpu-mkl) C:\Users\wayne&gt;where python
C:\Program Files\OpendTect\Python\envs\odmlpython-cpu-mkl\python.exe
C:\Users\wayne\AppData\Local\Microsoft\WindowsApps\python.exe

(odmlpython-cpu-mkl) C:\Users\wayne&gt;jupyter kernelspec list
Available kernels<span style="color:#960050;background-color:#1e0010">:</span>
  python3    C:\Program Files\OpendTect\Python\envs\odmlpython-cpu-mkl\share\jupyter\kernels\python3
</code></pre></div><p>The &ldquo;where/which&rdquo; command shows the location of the Python interpreter used by the OpendTect Python environment. The
&ldquo;jupyter kernelspec list&rdquo; command shows a folder location that will contain a &ldquo;kernel.json&rdquo; file that looks like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
 <span style="color:#f92672">&#34;argv&#34;</span>: [
  <span style="color:#e6db74">&#34;C:/odmlpython/Win64/Python/envs/odmlpython-cpu-mkl\\python.exe&#34;</span>,
  <span style="color:#e6db74">&#34;-m&#34;</span>,
  <span style="color:#e6db74">&#34;ipykernel_launcher&#34;</span>,
  <span style="color:#e6db74">&#34;-f&#34;</span>,
  <span style="color:#e6db74">&#34;{connection_file}&#34;</span>
 ],
 <span style="color:#f92672">&#34;display_name&#34;</span>: <span style="color:#e6db74">&#34;Python 3&#34;</span>,
 <span style="color:#f92672">&#34;language&#34;</span>: <span style="color:#e6db74">&#34;python&#34;</span>
}
</code></pre></div><p>The first element in the &ldquo;argv&rdquo; JSON array is supposed to be the location of the Python interpreter to be used as the Jupyter kernel.
Unfortunately the Python installed by the OpendTect Installation Manager has a broken &ldquo;kernel.json&rdquo; file because it contains
the path to the Python interpreter on the machine where the environment was built and not the location on your system. There are 2 ways
to fix this:</p>
<ul>
<li>Edit the installed &ldquo;kernel.json&rdquo; file in the OpendTect software installation as per the location reported by the &ldquo;jupyter kernel list&rdquo;
command (eg C:\Program Files\OpendTect\Python\envs\odmlpython-cpu-mkl\share\jupyter\kernels\python3\kernel.json), this will probably
require administrator privileges and might not be an option for some users.</li>
<li>Add an appropriate &ldquo;kernel.json&rdquo; file in a user editable location, on Windows under &ldquo;%APPDATA%\jupyter\kernels&rdquo; or on Linux/Unix
under &ldquo;~/.local/share/jupyter/kernels&rdquo;. Keep the name simple (only use ASCII letters, ASCII numbers, simple separators: - hyphen, . period, _ underscore, and
avoid spaces). An easy way is to copy the file from the OpendTect installation and edit the user local copy and replace the Python
location in the &ldquo;argv&rdquo; array with what the &ldquo;where/which&rdquo; command reports. On Windows this would look like this:</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-posh" data-lang="posh">(odmlpython-cpu-mkl) C:\Users\wayne&gt;xcopy  <span style="color:#e6db74">&#34;C:\Program Files\OpendTect\Python\envs\odmlpython-cpu-mkl\share\jupyter\kernels\python3\kernel.json&#34;</span> <span style="color:#66d9ef">%</span>APPDATA%\jupyter\kernels\od_python\kernel.json
Does C:\Users\wayne\AppData\Roaming\jupyter\kernels\od_python\kernel.json specify a file name
or directory name on the target
(F = file, D = directory)? F
C:\Program Files\OpendTect\Python\envs\odmlpython-cpu-mkl\share\jupyter\kernels\python3\kernel.json
1 File(s) copied
</code></pre></div><p>The edited &ldquo;kernel.json&rdquo; file will look like:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
 <span style="color:#f92672">&#34;argv&#34;</span>: [
  <span style="color:#e6db74">&#34;C:/Program Files/OpendTect/Python/envs/odmlpython-cpu-mkl/python.exe&#34;</span>,
  <span style="color:#e6db74">&#34;-m&#34;</span>,
  <span style="color:#e6db74">&#34;ipykernel_launcher&#34;</span>,
  <span style="color:#e6db74">&#34;-f&#34;</span>,
  <span style="color:#e6db74">&#34;{connection_file}&#34;</span>
 ],
 <span style="color:#f92672">&#34;display_name&#34;</span>: <span style="color:#e6db74">&#34;OD Python 3&#34;</span>,
 <span style="color:#f92672">&#34;language&#34;</span>: <span style="color:#e6db74">&#34;python&#34;</span>
}
</code></pre></div><p>Note, as shown here, it might be handy to customise the &ldquo;display_name&rdquo; field because this will be displayed in the list of Python environments
in the Jupyter UI. Also note the use of forward slashes as opposed to backslashes in the file path because
backslashes have special meaning in JSON. Python will handle the path correctly on Windows but if you must use backslashes you will need
to replace each single backslash with a double backslash (eg &ldquo;C:\\Program Files\\OpendTect\\Python\\envs\\odmlpython-cpu-mkl\\python.exe&rdquo;).
After creating the file you can verify it is recognised by repeating the &ldquo;jupyter kernelspec list&rdquo; command:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-posh" data-lang="posh">(odmlpython-cpu-mkl) C:\Users\wayne&gt;jupyter kernelspec list
Available kernels<span style="color:#960050;background-color:#1e0010">:</span>
  od_python   C:\Users\wayne\AppData\Roaming\jupyter\kernels\od_python
  python3     C:\Program Files\OpendTect\Python\envs\odmlpython-cpu-mkl\share\jupyter\kernels\python3
</code></pre></div>
                        </div>
                        
                        

                    </div>
                    

                    

                    

                    <div class="col-md-3">

                        

                        

<div class="panel panel-default sidebar-menu">

    <div class="panel-heading">
      <h3 class="panel-title">Search</h3>
    </div>

    <div class="panel-body">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" role="search">
            <div class="input-group">
                <input type="search" name="q" class="form-control" placeholder="Search">
                <input type="hidden" name="sitesearch" value="https://waynegm.github.io/">
                <span class="input-group-btn">
                    <button type="submit" class="btn btn-template-main"><i class="fas fa-search"></i></button>
                </span>
            </div>
        </form>
    </div>
</div>







<div class="panel panel-default sidebar-menu">

    <div class="panel-heading">
        <h3 class="panel-title">Categories</h3>
    </div>

    <div class="panel-body">
        <ul class="nav nav-pills nav-stacked">
            
            
            <li>
                <a href="/categories/attribute">attribute (3)</a>
            </li>
            
            <li>
                <a href="/categories/howto">howto (4)</a>
            </li>
            
            <li>
                <a href="/categories/python">python (1)</a>
            </li>
            
            <li>
                <a href="/categories/qgis">qgis (1)</a>
            </li>
            
        </ul>
    </div>

</div>








<div class="panel sidebar-menu">

    <div class="panel-heading">
        <h3 class="panel-title">Tags</h3>
    </div>

    <div class="panel-body">
        <ul class="tag-cloud">
            
            
            <li>
                <a href="/tags/benchmark"><i class="fas fa-tags"></i> benchmark</a>
            </li>
            
            <li>
                <a href="/tags/code"><i class="fas fa-tags"></i> code</a>
            </li>
            
            <li>
                <a href="/tags/cpu"><i class="fas fa-tags"></i> cpu</a>
            </li>
            
            <li>
                <a href="/tags/debugging"><i class="fas fa-tags"></i> debugging</a>
            </li>
            
            <li>
                <a href="/tags/external-attribute"><i class="fas fa-tags"></i> external-attribute</a>
            </li>
            
            <li>
                <a href="/tags/gpu"><i class="fas fa-tags"></i> gpu</a>
            </li>
            
            <li>
                <a href="/tags/inversion"><i class="fas fa-tags"></i> inversion</a>
            </li>
            
            <li>
                <a href="/tags/jupyter"><i class="fas fa-tags"></i> jupyter</a>
            </li>
            
            <li>
                <a href="/tags/logging"><i class="fas fa-tags"></i> logging</a>
            </li>
            
            <li>
                <a href="/tags/mapping"><i class="fas fa-tags"></i> mapping</a>
            </li>
            
            <li>
                <a href="/tags/opendtect"><i class="fas fa-tags"></i> opendtect</a>
            </li>
            
            <li>
                <a href="/tags/pylops"><i class="fas fa-tags"></i> pylops</a>
            </li>
            
            <li>
                <a href="/tags/python"><i class="fas fa-tags"></i> python</a>
            </li>
            
            <li>
                <a href="/tags/qgis"><i class="fas fa-tags"></i> qgis</a>
            </li>
            
            <li>
                <a href="/tags/visual-studio"><i class="fas fa-tags"></i> visual-studio</a>
            </li>
            
            <li>
                <a href="/tags/wells"><i class="fas fa-tags"></i> wells</a>
            </li>
            
        </ul>
    </div>

</div>






                        

                    </div>
                    

                    

                </div>
                

            </div>
            
        </div>
        

        <div id="copyright">
    <div class="container">
        <div class="col-md-12">
            
            <p class="pull-left">Copyright (c) 2021, Wayne Mogg; all rights reserved.</p>
            
            <p class="pull-right">
              Template by <a href="https://bootstrapious.com/p/universal-business-e-commerce-template">Bootstrapious</a>.
              

              Ported to Hugo by <a href="https://github.com/devcows/hugo-universal-theme">DevCows</a>.
            </p>
        </div>
    </div>
</div>





    </div>
    

    
<script async src="https://www.googletagmanager.com/gtag/js?id=G-8TDBM2EMZX"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-8TDBM2EMZX', { 'anonymize_ip': false });
}
</script>

<script src="//code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/jquery.waypoints.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/Counter-Up/1.0/jquery.counterup.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-parallax/1.1.3/jquery-parallax.js"></script>

<script src="/js/front.js"></script>


<script src="/js/owl.carousel.min.js"></script>



  </body>
</html>
